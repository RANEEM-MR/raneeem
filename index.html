<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RANEEM - A Heritage of Excellence Since 2025</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
</head>
 <style>
        body { font-family: 'Inter', sans-serif; margin: 0; color: #333; }
        .container { max-width: 1200px; margin: 0 auto; padding: 0 15px; }
        .chatbot-container { position: fixed; bottom: 20px; right: 20px; z-index: 1000; }
        .chat-button { background-color: #743b06; color: white; border: none; border-radius: 50%; width: 60px; height: 60px; display: flex; align-items: center; justify-content: center; cursor: pointer; box-shadow: 0 4px 8px rgba(0,0,0,0.2); }
        .chat-window { display: none; flex-direction: column; width: 350px; height: 500px; background: white; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.3); overflow: hidden; }
        .chat-header { background: #633501; color: white; padding: 15px; display: flex; justify-content: space-between; align-items: center; }
        .chat-header h3 { margin: 0; }
        .chat-header .close-btn { background: none; border: none; color: white; font-size: 24px; cursor: pointer; }
        .chat-messages { flex-grow: 1; padding: 15px; overflow-y: auto; display: flex; flex-direction: column; gap: 10px; }
        .message { padding: 10px 15px; border-radius: 20px; max-width: 80%; }
        .ai-message { background-color: #f1f1f1; color: #333; align-self: flex-start; }
        .user-message { background-color: #462002; color: white; align-self: flex-end; }
        .typing-indicator { padding: 15px; display: none; }
        .typing-dots { display: flex; gap: 5px; align-items: center; }
        .typing-dots span { width: 8px; height: 8px; background-color: #ccc; border-radius: 50%; animation: typing 1s infinite; }
        .typing-dots span:nth-child(2) { animation-delay: 0.2s; }
        .typing-dots span:nth-child(3) { animation-delay: 0.4s; }
        @keyframes typing { 0%, 100% { opacity: 0.3; } 50% { opacity: 1; } }
        .chat-input { display: flex; padding: 10px; border-top: 1px solid #eee; }
        .chat-input input { flex-grow: 1; border: 1px solid #ddd; border-radius: 20px; padding: 10px 15px; font-size: 16px; }
        .chat-input .send-btn { background: #361a00; border: none; color: white; border-radius: 50%; width: 40px; height: 40px; margin-left: 10px; cursor: pointer; display: flex; align-items: center; justify-content: center; }
    </style>
<body>
    <!-- Loading Screen -->
    <div class="loading-screen" id="loadingScreen">
        <div class="loading-content">
            <div class="logo-loading">
                <img src="RANNEM LOGO.png" alt="RANEEM" class="loading-logo">
            </div>
            <div class="loading-spinner"></div>
        </div>
    </div>

    <!-- Top Bar -->
    <div class="top-bar">
        <div class="container">
            <div class="top-left">
                <span class="contact-item">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"/>
                    </svg>
                    Call Us
                </span>
                <span class="contact-item">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/>
                    </svg>
                    Email message
                </span>
            </div>
            <div class="top-center">
                <span>A HERITAGE OF EXCELLENCE SINCE 2025</span>
            </div>
            <div class="top-right">
                <button class="location-btn" onclick="openLocationModal()">
                    Ship To: 
                    <span class="flag">Maroc</span>
                    <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M7 10l5 5 5-5z"/>
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="logo">
                <img src="RANNEM LOGO.png" alt="RANEEM" class="header-logo">
            </div>
            
            <nav class="nav">
                <a href="collection.html" class="nav-link active">SHOP</a>
                <a href="#" class="nav-link">CUSTOMISED GIFTS</a>
                <a href="#" class="nav-link">CORPORATE GIFTS</a>
                <a href="#" class="nav-link">THE WORLD OF RANEEM</a>
                <a href="#" class="nav-link">CONTACT US</a>
            </nav>

            <div class="header-actions">
                <button class="search-btn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
                    </svg>
                </button>
                <button class="cart-btn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M7 18c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12L8.1 13h7.45c.75 0 1.41-.41 1.75-1.03L21.7 4H5.21l-.94-2H1zm16 16c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/>
                    </svg>
                    <span class="cart-count">0</span>
                </button>
            </div>

            <button class="mobile-menu-btn" onclick="toggleMobileMenu()">
                <span class="hamburger-line"></span>
                <span class="hamburger-line"></span>
                <span class="hamburger-line"></span>
            </button>
        </div>
    </header>

    <!-- Mobile Menu -->
    <div class="mobile-menu" id="mobileMenu">
        <a href="collection.html" class="mobile-nav-link">SHOP</a>
        <a href="#" class="mobile-nav-link">CUSTOMISED GIFTS</a>
        <a href="#" class="mobile-nav-link">CORPORATE GIFTS</a>
        <a href="#" class="mobile-nav-link">THE WORLD OF RANEEM</a>
        <a href="#" class="mobile-nav-link">CONTACT US</a>
    </div>

    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-slider">
            <div class="slide active">
                <img src="boite 15.png" alt="Luxury date gift boxes">
            </div>
            <div class="slide">
                <img src="boite 16.png" alt="Premium dates collection">
            </div>
            <div class="slide">
                <img src="boite 17.png" alt="Artisan crafted dates">
            </div>
        </div>
        
        <div class="hero-content">
            <h1 class="hero-title">Discover the Difference</h1>
            <p class="hero-subtitle">EVER-EVOLVING OUR LUXURY SEASONAL</p>
            <p class="hero-subtitle">COLLECTIONS ARE FULLY CUSTOMIZABLE</p>
            <button class="hero-btn" onclick="window.location.href='collection.html'">SHOP COLLECTION</button>
        </div>

        <button class="hero-nav prev" onclick="changeSlide(-1)">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/>
            </svg>
        </button>
        <button class="hero-nav next" onclick="changeSlide(1)">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                <path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/>
            </svg>
        </button>

        <div class="hero-dots">
            <span class="dot active" onclick="currentSlide(1)"></span>
            <span class="dot" onclick="currentSlide(2)"></span>
            <span class="dot" onclick="currentSlide(3)"></span>
        </div>
    </section>

    <!-- Featured Products Section -->
    <section class="featured-products">
        <div class="container">
            <div class="products-grid">
                <div class="product-card large">
                    <div class="product-image">
                        <img src="boite 1.jpg" alt="Seasonal Collection">
                        
                    </div>
                    <div class="product-info">
                        <h3>Seasonal Collection</h3>
                        <p>Exquisite dates presented in our signature decorative boxes</p>
                        <div class="product-price">From $89</div>
                        <button class="product-btn" onclick="window.location.href='collection.html'">Shop Now</button>
                    </div>
                </div>

                <div class="product-card large">
                    <div class="product-image">
                        <img src="boite 2.jpg" alt="Luxury Gift Boxes">
                       
                    </div>
                    <div class="product-info">
                        <h3>Luxury Gift Boxes</h3>
                        <p>Premium gift sets perfect for special occasions</p>
                        <div class="product-price">From $129</div>
                        <button class="product-btn" onclick="window.location.href='collection.html'">Shop Now</button>
                    </div>
                </div>
                <div class="product-card large">
                    <div class="product-image">
                        <img src="2-100.jpg" alt="Seasonal Collection">
                        
                    </div>
                    <div class="product-info">
                        <h3>Seasonal Collection</h3>
                        <p>Exquisite dates presented in our signature decorative boxes</p>
                        <div class="product-price">From $89</div>
                        <button class="product-btn" onclick="window.location.href='collection.html'">Shop Now</button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Categories Section -->
    <section class="categories">
        <div class="container">
            <div class="section-header">
                <h2>Our Collections</h2>
                <p>Discover our carefully curated selection of premium dates and luxury gift sets</p>
            </div>

            <div class="categories-grid">
                <div class="category-card">
                    <div class="category-image">
                        <img src="boite 8.jpg" alt="Dates">
                    </div>
                    <div class="category-info">
                        <h3>Dates</h3>
                        <p>Premium quality dates from the finest groves</p>
                        <a href="collection.html" class="category-link">Explore Collection</a>
                    </div>
                </div>

                <div class="category-card">
                    <div class="category-image">
                        <img src="boite 12.jpg" alt="Chocolates">
                    </div>
                    <div class="category-info">
                        <h3>Chocolates</h3>
                        <p>Artisan chocolates crafted with the finest ingredients</p>
                        <a href="collection.html" class="category-link">Explore Collection</a>
                    </div>
                </div>

                <div class="category-card">
                    <div class="category-image">
                        <img src="boite 4.jpg" alt="Gift Sets">
                    </div>
                    <div class="category-info">
                        <h3>Gift Sets</h3>
                        <p>Elegant gift collections for every occasion</p>
                        <a href="collection.html" class="category-link">Explore Collection</a>
                    </div>
                </div>

                <div class="category-card">
                    <div class="category-image">
                        <img src="boite 6.jpg" alt="Corporate Gifts">
                    </div>
                    <div class="category-info">
                        <h3>Corporate Gifts</h3>
                        <p>Professional gifting solutions for business</p>
                        <a href="collection.html" class="category-link">Explore Collection</a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Newsletter Section -->
    <section class="newsletter">
        <div class="container">
            <div class="newsletter-content">
                <h2>Stay Connected</h2>
                <p>Be the first to know about our latest collections and exclusive offers</p>
                <form class="newsletter-form">
                    <input type="email" placeholder="Enter your email address" required>
                    <button type="submit">Subscribe</button>
                </form>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-grid">
                <div class="footer-column">
                    <div class="footer-logo">
                        <img src="RANNEM LOGO.png" alt="RANEEM" class="footer-logo-img">
                    </div>
                    <p>A heritage of excellence since 2025, bringing you the finest dates and luxury confections from around the world.</p>
                    <div class="social-links">
                        <a href="#" class="social-link">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
  <path d="M22.675 0h-21.35C.597 0 0 .597 0 1.326v21.348C0 23.403.597 24 1.326 
  24H12.82v-9.294H9.692V11.01h3.128V8.413c0-3.1 1.894-4.788 
  4.659-4.788 1.325 0 2.464.099 2.797.143v3.24l-1.918.001c-1.504 
  0-1.796.715-1.796 1.763v2.313h3.587l-.467 3.696h-3.12V24h6.116C23.403 
  24 24 23.403 24 22.674V1.326C24 .597 23.403 0 22.675 0z"/>
</svg>
                        </a>
                        <a href="#" class="social-link">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z"/>
                            </svg>
                        </a>
                        <a href="#" class="social-link">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12.017 0C5.396 0 .029 5.367.029 11.987c0 5.079 3.158 9.417 7.618 11.174-.105-.949-.199-2.403.041-3.439.219-.937 1.406-5.957 1.406-5.957s-.359-.72-.359-1.781c0-1.663.967-2.911 2.168-2.911 1.024 0 1.518.769 1.518 1.688 0 1.029-.653 2.567-.992 3.992-.285 1.193.6 2.165 1.775 2.165 2.128 0 3.768-2.245 3.768-5.487 0-2.861-2.063-4.869-5.008-4.869-3.41 0-5.409 2.562-5.409 5.199 0 1.033.394 2.143.889 2.741.099.12.112.225.085.345-.09.375-.293 1.199-.334 1.363-.053.225-.172.271-.402.165-1.495-.69-2.433-2.878-2.433-4.646 0-3.776 2.748-7.252 7.92-7.252 4.158 0 7.392 2.967 7.392 6.923 0 4.135-2.607 7.462-6.233 7.462-1.214 0-2.357-.629-2.75-1.378l-.748 2.853c-.271 1.043-1.002 2.35-1.492 3.146C9.57 23.812 10.763 24.009 12.017 24.009c6.624 0 11.99-5.367 11.99-11.988C24.007 5.367 18.641.001.012.001z"/>
                            </svg>
                        </a>
                        <a href="#" class="social-link">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
                            </svg>
                        </a>
                    </div>
                </div>

                <div class="footer-column">
                    <h4>Shop</h4>
                    <ul>
                        <li><a href="#">Dates</a></li>
                        <li><a href="#">Chocolates</a></li>
                        <li><a href="#">Gift Sets</a></li>
                        <li><a href="#">Seasonal Collections</a></li>
                        <li><a href="#">New Arrivals</a></li>
                    </ul>
                </div>

                <div class="footer-column">
                    <h4>Services</h4>
                    <ul>
                        <li><a href="#">Customised Gifts</a></li>
                        <li><a href="#">Corporate Gifts</a></li>
                        <li><a href="#">Wedding Favors</a></li>
                        <li><a href="#">Bulk Orders</a></li>
                        <li><a href="#">Gift Cards</a></li>
                    </ul>
                </div>

                <div class="footer-column">
                    <h4>Support</h4>
                    <ul>
                        <li><a href="#">Contact Us</a></li>
                        <li><a href="#">Shipping Info</a></li>
                        <li><a href="#">Returns & Exchanges</a></li>
                        <li><a href="#">Size Guide</a></li>
                        <li><a href="#">FAQ</a></li>
                    </ul>
                </div>

                <div class="footer-column">
                    <h4>About</h4>
                    <ul>
                        <li><a href="#">Our Story</a></li>
                        <li><a href="#">Heritage</a></li>
                        <li><a href="#">Quality Promise</a></li>
                        <li><a href="#">Sustainability</a></li>
                        <li><a href="#">Careers</a></li>
                    </ul>
                </div>
            </div>

            <div class="footer-bottom">
                <div class="footer-bottom-left">
                    <p>&copy; 2025 RANNEM International. All rights reserved.</p>
                </div>
                <div class="footer-bottom-right">
                    <div class="footer-links">
                        <a href="#">Privacy Policy</a>
                        <a href="#">Terms of Service</a>
                        <a href="#">Cookie Policy</a>
                        <a href="#">Accessibility</a>
                    </div>
                    <div class="payment-methods">
                        <span>💳</span>
                        <span>💳</span>
                        <span>💳</span>
                        <span>💳</span>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- Location Modal -->
    <div class="modal" id="locationModal">
        <div class="modal-content">
            <span class="close" onclick="closeLocationModal()">&times;</span>
            <h2>Select your delivery location</h2>
            
            <div class="form-group">
                <label>Country/Region</label>
                <select id="countrySelect">
                    <option value="ma">Maroc</option>
                    <option value="tu">Tunisie</option>
                    <option value="al">Algeria</option>
                    <option value="eg">Egypte</option>
                    <option value="qa">Qatar</option>
                    <option value="Pa">Palestine</option>
                    <option value="ae">United Arab Emirates</option>
                    <option value="sa">Saudi Arabia</option>
                </select>
            </div>

            <div class="form-group">
                <label>Language</label>
                <select id="languageSelect">
                    <option value="en">English</option>
                    <option value="ar">العربية</option>
                    <option value="fr">Français</option>
                </select>
            </div>

            <div class="modal-buttons">
                <button class="cancel-btn" onclick="closeLocationModal()">CANCEL</button>
                <button class="go-btn" onclick="applyLocation()">GO</button>
            </div>
        </div>
    </div>

    <!-- Back to Top Button -->
    <button class="back-to-top" id="backToTop" onclick="scrollToTop()">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"/>
        </svg>
    </button>
    <!-- Chatbot -->
    <div class="chatbot-container">
        <div class="chat-window" id="chatWindow">
            <div class="chat-header">
                <h3>🤖 AI Assistant</h3>
                <button class="close-btn" id="closeBtn">&times;</button>
            </div>
            
            <div class="chat-messages" id="chatMessages">
                <div class="message ai-message">
                    Hello! I'm your RANEEM AI assistant. How can I help you today? 😊
                </div>
            </div>
            
            <div class="typing-indicator" id="typingIndicator">
                <div class="typing-dots">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>
            
            <div class="chat-input">
                <input type="text" id="messageInput" placeholder="Type your message..." />
                <button class="send-btn" id="sendBtn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="22" y1="2" x2="11" y2="13"></line>
                        <polygon points="22,2 15,22 11,13 2,9"></polygon>
                    </svg>
                </button>
            </div>
        </div>
        
        <button class="chat-button" id="chatBtn">
            <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z"></path>
            </svg>
        </button>
    </div>
  <script>
        // Dummy functions to prevent errors if script.js is missing
        function openLocationModal() { console.log('openLocationModal called'); }
        function closeLocationModal() { console.log('closeLocationModal called'); }
        function applyLocation() { console.log('applyLocation called'); }
        function toggleMobileMenu() { console.log('toggleMobileMenu called'); }
        function changeSlide(n) { console.log(`changeSlide called with ${n}`); }
        function currentSlide(n) { console.log(`currentSlide called with ${n}`); }
        function scrollToTop() { window.scrollTo({top: 0, behavior: 'smooth'}); }

        class SimpleChatbot {
            constructor() {
                this.chatBtn = document.getElementById('chatBtn');
                this.chatWindow = document.getElementById('chatWindow');
                this.closeBtn = document.getElementById('closeBtn');
                this.messageInput = document.getElementById('messageInput');
                this.sendBtn = document.getElementById('sendBtn');
                this.chatMessages = document.getElementById('chatMessages');
                this.typingIndicator = document.getElementById('typingIndicator');
                
                this.isOpen = false;
                this.init();
            }

            init() {
                this.chatBtn.addEventListener('click', () => this.toggleChat());
                this.closeBtn.addEventListener('click', () => this.toggleChat());
                this.sendBtn.addEventListener('click', () => this.sendMessage());
                this.messageInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') this.sendMessage();
                });
            }

            toggleChat() {
                this.isOpen = !this.isOpen;
                this.chatWindow.style.display = this.isOpen ? 'flex' : 'none';
                this.chatBtn.style.display = this.isOpen ? 'none' : 'flex';
                
                if (this.isOpen) {
                    this.messageInput.focus();
                }
            }

            addMessage(content, isUser = false) {
                const messageDiv = document.createElement('div');
                messageDiv.className = `message ${isUser ? 'user-message' : 'ai-message'}`;
                messageDiv.textContent = content;
                
                this.chatMessages.appendChild(messageDiv);
                this.scrollToBottom();
            }

            showTyping() {
                this.typingIndicator.style.display = 'block';
                this.scrollToBottom();
            }

            hideTyping() {
                this.typingIndicator.style.display = 'none';
            }

            scrollToBottom() {
                this.chatMessages.scrollTop = this.chatMessages.scrollHeight;
            }

            async sendMessage() {
                const message = this.messageInput.value.trim();
                if (!message) return;

                // Add user message
                this.addMessage(message, true);
                this.messageInput.value = '';
                this.sendBtn.disabled = true;

                // Show typing indicator
                this.showTyping();

                try {
                    // Get AI response
                    const response = await this.getAIResponse(message);
                    
                    // Hide typing and show response
                    this.hideTyping();
                    this.addMessage(response);
                    
                } catch (error) {
                    this.hideTyping();
                    this.addMessage('Sorry, I encountered an error. Please try again.');
                    console.error('AI Error:', error);
                } finally {
                    this.sendBtn.disabled = false;
                    this.messageInput.focus();
                }
            }

            async getAIResponse(userMessage) {
                // This function is updated to provide website-specific context to the AI.
                const apiKey = "AIzaSyCcsWlYYFYa5h0fuWbFQrTx0pfEQhhnmHE"; // The API key is handled by the environment.
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

                const systemInstruction = {
                    role: "user",
                    parts: [{
                        text: `You are 3zy 5anz, a friendly and highly intelligent AI assistant with a cat-like personality. Your purpose is to be helpful, provide accurate information, and maintain a positive and engaging tone. ALWAYS end every single sentence you say with the word 'meow'.`
                    }]
                };

                const userQuery = {
                    role: "user",
                    parts: [{
                        text: userMessage
                    }]
                };

                const payload = {
                    contents: [
                        systemInstruction,
                        { role: "model", parts: [{ text: "Of course. I am ready to assist the customers of RANEEM." }] },
                        userQuery
                    ]
                };

                try {
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) {
                        const errorBody = await response.text();
                        console.error("API Error Response:", errorBody);
                        throw new Error(`API request failed with status ${response.status}`);
                    }

                    const result = await response.json();

                    if (result.candidates && result.candidates.length > 0 &&
                        result.candidates[0].content && result.candidates[0].content.parts &&
                        result.candidates[0].content.parts.length > 0) {
                        return result.candidates[0].content.parts[0].text;
                    } else {
                        console.error('Unexpected API response structure:', result);
                        return "I'm sorry, I couldn't generate a response right now.";
                    }
                } catch (error) {
                    console.error('Error calling Gemini API:', error);
                    return "I'm having trouble connecting at the moment. Please try again later.";
                }
            }
        }

        // Initialize the chatbot when the page loads
        document.addEventListener('DOMContentLoaded', () => {
            new SimpleChatbot();
        });
    </script>
    <script src="script.js"></script>
</body>
</html>
